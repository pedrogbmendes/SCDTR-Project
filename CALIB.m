%% SESSION 3 

rate = [19.00
53.00
82.00
106.00
128.00
147.00
167.00
182.00
197.00
212.00
225.00
238.00
250.00
262.00
273.00
283.00
293.00
302.00
311.00
320.00
329.00
336.00
343.00
351.00
357.00
364.00
371.00
379.00
384.00
388.00
395.00
400.00
406.00
411.00
419.00
422.00
425.00
431.00
435.00
440.00
444.00
451.00
453.00
455.00
461.00
464.00
469.00
472.00
478.00
479.00
481.00
486.00
488.00
493.00
496.00
502.00
502.00
506.00
508.00
510.00
514.00
516.00
522.00
522.00
526.00
527.00
528.00
533.00
534.00
541.00
540.00
544.00
545.00
545.00
550.00
551.00
557.00
556.00
560.00
560.00
560.00
565.00
565.00
572.00
570.00
574.00
574.00
574.00
578.00
579.00
585.00
583.00
587.00
586.00
588.00
591.00
590.00
597.00
594.00
600.00
598.00
601.00
602.00
602.00
608.00
605.00
610.00
608.00
612.00
613.00
612.00
619.00
615.00
621.00
618.00
622.00
622.00
621.00
628.00
624.00
629.00
627.00
631.00
632.00
630.00
636.00
633.00
638.00
636.00
640.00
639.00
639.00
645.00
641.00
646.00
643.00
648.00
647.00
648.00
653.00
648.00
654.00
651.00
655.00
655.00
656.00
660.00
655.00
661.00
658.00
663.00
662.00
664.00
666.00
662.00
668.00
664.00
669.00
668.00
670.00
673.00
668.00
674.00
670.00
676.00
674.00
677.00
679.00
674.00
680.00
676.00
682.00
680.00
683.00
685.00
682.00
686.00
681.00
687.00
685.00
688.00
690.00
688.00
692.00
687.00
692.00
690.00
694.00
695.00
694.00
696.00
692.00
698.00
695.00
699.00
700.00
699.00
701.00
696.00
702.00
700.00
703.00
705.00
704.00
706.00
701.00
707.00
705.00
708.00
709.00
709.00
710.00
706.00
711.00
712.00
713.00
714.00
713.00
714.00
710.00
715.00
716.00
716.00
718.00
717.00
718.00
714.00
719.00
720.00
720.00
721.00
722.00
722.00
721.00
723.00
723.00
724.00
725.00
725.00
726.00
726.00
727.00
727.00
728.00
728.00
729.00
729.00
729.00
730.00
731.00
731.00
731.00
732.00
732.00
733.00
734.00


];

u = (0:1:255);

v = rate * 5 / 1023;

  m = -0.6403;
  b = 4.9; 
   
  R_ldr = (5.0-v).*(10000./v);
  %i_lux = pow(10.0, ((log10(R_ldr)-b)/m ));
  
  i_lux = 10.^((log10(R_ldr)-b)/m);
%   
%   m2 = -0.363;
%   b2 = log10(20515.0); 
%    
%   R_ldr2 = (5.0-v).*(10000./v);
  %i_lux = pow(10.0, ((log10(R_ldr)-b)/m ));
  
  %i_lux2 = 10.^((log10(R_ldr)-b2)/m2);
  figure();
  plot(u, i_lux);
  
  f = fit(u', i_lux, 'poly1')
  %f2 = fit(u', i_lux2, 'poly1')
  
  hold on;
  
  plot(f);
  
%   figure();
%   
%   plot(u, i_lux2);
%   hold on;
%   plot(f2);
